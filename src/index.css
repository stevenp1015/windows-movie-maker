@import "tailwindcss";

@theme {
  /* Tailwind v4 theme configuration */
  --font-sans: 'Roboto', system-ui, -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
}

:root {
  /* Custom CSS variables */
  --bg-app: linear-gradient(145deg, #f8fafc, #f1f5f9);
  --bg-panel: rgba(20 20 20 / 40%);
  --bg-card: rgba(245, 245, 245, 0.9);
  --reflective-edge: linear-gradient(145deg, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 40%, rgba(255, 255, 255, 0) 60%, rgba(255, 255, 255, 1) 100%);
  --shadow-subtle: 0 4px 20px rgba(0, 0, 0, 0.03);
  --shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.06);

  /* me being extra */

  --transition-colors-normal: 400ms ease-in-out;

  /* Glass Colors */
  --glass-border-color: rgba(255, 255, 255, 0.3);
  --glass-border-color-hover-left: rgba(255, 255, 255, 0.1);
  --glass-border-color-hover-top: rgba(255, 255, 255, 0.3);
  --glass-border-color-hover-right: rgba(255, 255, 255, 0.5);
  --glass-border-color-hover-bottom: rgba(255, 255, 255, 0.5);
  --glass-surface: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.05) 50%, rgba(255, 255, 255, 0.1) 100%);

  /* Glass Shadows */
  --glass-shadow:
    inset 3px 3px 2px -1px rgba(255, 255, 255, 0.2),
    inset 1px 0px 2px -1px rgba(255, 255, 255, 0.4),
    inset 20px 20px 10px 2px rgba(203, 203, 255, 0.01);

  --glass-shadow-hover:
    inset 1px 3px 1px 1px rgba(255, 255, 255, 0.3),
    inset 2px 0px 1px 1px rgba(255, 255, 255, 0.5),
    inset 20px 20px 10px 2px rgba(203, 203, 255, 0.1);

  --glass-shadow-reflective:
    /* Left highlight, like a sharp reflection */
    inset 2px 0px 1px -1px rgba(235, 235, 255, 0.5),
    /* Top highlight, like a sharp reflection */
    inset 0px 2px 1px -1px rgba(235, 235, 255, 0.5),
    /* Bottom-right diffuse reflection */

    /* Inner glow for depth */

    /* Ambient light from within the glass */
    inset 0 0 7px 3px rgba(180, 180, 255, 0.1);

  --glass-shadow-reflective-hover:
    inset 4px 4px 10px 1px rgba(255, 255, 255, 0.9),
    /* Brighter, more pronounced top-left on hover */
    inset -4px -4px 12px 1px rgba(255, 255, 255, 0.4),
    /* Stronger bottom-right reflection */
    inset 0 0 20px 5px rgba(255, 255, 255, 0.2),
    /* Enhanced inner glow */
    inset 0 0 30px 8px rgba(180, 180, 255, 0.12);
  /* Increased ambient light for a more 'lit' look */


  /* Moat Colors */
  --moat-bg: #0a0a0a;
  --moat-border: rgba(255, 255, 255, 0.3);
  --moat-shadow:
    inset 2px 2px 6px 0px rgba(0, 0, 0, 0.25),
    inset 4px 2px 9px -2px rgba(55, 55, 95, 0.9);

  --moat-shadow-hover:
    inset 2px 3px 4px -1px rgba(150, 150, 150, 0.2),
    inset 2px 3px 2px -1px rgba(245, 245, 255, 0.7);

  /* Dimensions */
  --card-radius: 35px;
  --moat-radius: 26px;
  --border-width: 4px;

  /* Text colors */
  --text-primary: #0a1a3a;
  --text-secondary: #f6f6f690;
  --text-muted: #999999;

  /* Accent colors */
  --accent-primary: #000000;
  --accent-success: #00cc88;
  --accent-error: #ff3366;
  --accent-warning: #ffaa00;
  --accent-info: #00aaff;
}


body {
  font-family: var(--font-sans);


  overflow: hidden;
  -webkit-font-smoothing: antialiased;

  /* Prevent Chrome's back/forward swipe navigation gestures */
  overscroll-behavior-x: none;
}

/*************************************/
/*         me being extra          */
/*************************************/
.white-lamp {
  box-shadow: 0px 7px 17px -13px #fff;
  border-radius: 8px;
  transition: all 0.3s ease;
  will-change: transform;
  transform: translateZ(0);
}

.white-lamp::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 8px;
  padding: 2px;
  background: var(--reflective-edge);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.5;
  box-shadow: inset 0px 0px 5px -2px #fff;
  transition: all 0.3s ease;
  will-change: transform;
  transform: translateZ(0);
}

.white-lamp::before {
  content: '';
  position: absolute;
  bottom: 0;
  border-radius: 8px;
  left: 0;
  right: 0;
  height: 1px;
  width: 100%;
  background: linear-gradient(to right, transparent 10%, #ffffff50 55%, transparent 100%);
  transition: all 0.3s ease;
  will-change: transform;
  transform: translateZ(0);
}

.white-lamp-muted {
  box-shadow: 0px 7px 15px -13px #ffffff50;
  border-top-left-radius: 20px;
  border-bottom-right-radius: 20px;
  border-top-right-radius: 8px;
  border-bottom-left-radius: 8px;
  transition: all 0.3s ease;
  will-change: transform;
  transform: translateZ(0);
}

.white-lamp-muted::after {
  content: '';
  position: absolute;
  inset: 0;
  border-top-left-radius: 20px;
  border-bottom-right-radius: 20px;
  border-top-right-radius: 8px;
  border-bottom-left-radius: 8px;
  padding: 2px;
  background: var(--reflective-edge);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.2;
  box-shadow: inset 0px 0px 3px -2px #ffffff50;
  transition: all 0.3s ease;
  will-change: transform;
  transform: translateZ(0);
}

.white-lamp-muted::before {
  content: '';
  position: absolute;
  bottom: 0;
  border-top-left-radius: 20px;
  border-bottom-right-radius: 20px;
  border-top-right-radius: 8px;
  border-bottom-left-radius: 8px;
  left: 0;
  right: 0;
  height: 1px;
  opacity: 0.2;
  width: 100%;
  background: linear-gradient(to right, transparent 10%, #ffffff50 55%, transparent 100%);
  transition: all 0.3s ease;
  will-change: transform;
  transform: translateZ(0);
}

.glass-top-piece {
  position: absolute;
  inset: -10%;
  background: conic-gradient(from 0deg at 50% 50%, transparent 0%, transparent 85%, rgba(255, 255, 255, 0.9) 90%, transparent 95%);

  filter: hue-rotate(0deg);
  transition: all 0.8s ease;
  will-change: transform, filter;
  backface-visibility: hidden;
  transform: translateZ(0);
}

/* .scene-card-glass:hover .glass-top-piece {

  height: 2px;

  left: -200px;
  transition: all 0.5s ease;
}*/


/*************************************/
/*        Tab Button Styles          */
/*************************************/

/* Tab Button */
.tab-button {
  position: relative;
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-weight: 700;
  border-radius: 0.5rem;
  overflow: hidden;
  transition: all 0.3s ease;
}

.tab-button-active {
  background: linear-gradient(155deg, rgb(51 65 85) 0%, rgb(30 41 59) 50%, rgb(15 23 42) 100%);
}

.tab-button-inactive {
  cursor: pointer;
}


/* Codex Button */
.tab-button-inactive-codex {
  background: linear-gradient(155deg, rgb(100 116 139) 0%, rgb(82 82 91) 50%, rgb(51 65 85) 100%);
  filter: brightness(0.75);
}

.tab-text-rainbow-codex-inactive {
  opacity: 1;
}

.tab-text-rainbow-codex {
  position: relative;
  z-index: 10;
  background: linear-gradient(to right, rgb(248 113 113) -20%, rgb(249 115 22), rgb(250 204 21), rgb(45 212 191), rgb(167 139 250));
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  opacity: 1;
}


/* Turnaround Button */
.tab-button-inactive-turnaround {
  background: linear-gradient(155deg, rgb(51 65 85) 0%, rgb(82 82 91) 50%, rgb(51 65 85) 100%);
  filter: brightness(0.9);
}

.tab-text-rainbow-turnaround {
  position: relative;
  z-index: 10;
  background: linear-gradient(to right, rgb(129 140 248), rgb(232 121 249), rgb(251 113 133));
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  opacity: 1;
}

.tab-text-rainbow-turnaround-inactive {
  opacity: 0.8;
  filter: contrast(0.5) brightness(0.9);
}


/* Tam Button Shimmer */
.tab-shimmer-overlay {
  position: absolute;
  inset: 0;
  z-index: 20;
  pointer-events: none;
  mix-blend-mode: overlay;
}

.tab-shimmer-gradient {
  position: absolute;
  inset: 0;
  background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.8), transparent);
  width: 50%;
  height: 100%;
  transform: skewX(-12deg);
}

/*************************************/
/*         Scene Card Styles         */
/*************************************/
.scene-card {
  position: relative;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
  backdrop-filter: blur(20px) saturate(120%);
  -webkit-backdrop-filter: blur(20px) saturate(120%);
  border-radius: 24px;
  border: 1px solid rgba(50, 50, 50, 0.8);
  box-shadow:
    /* Inner highlight for volume */

    /* Top edge highlight */
    inset 0 0px 2px 0px rgba(255, 255, 255, 0.4),
    /* Deep shadow for lift */
    0 8px 32px rgba(0, 0, 0, 0.2),
    0px 0px 0px 3px rgba(80, 80, 180, 0.2),
    0px 0px 0px 4px rgba(80, 80, 180, 0.1),
    0px 0px 0px 7px rgba(40, 40, 40, 1);
  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
  overflow: hidden;
  transform: translateZ(0);
  will-change: transform;
}

.scene-card-rim {
  position: absolute;
  inset: 0;
  border-radius: 24px;
  z-index: 20;
  padding: 3px;
  opacity: 0.8;
  pointer-events: none;
  transition: all 0.2s ease;
  /* PERFORMANCE FIX: Hint browser to promote layer */
  will-change: transform;

  /* The Magic Mask */
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;

  /* PERFORMANCE FIX: Isolate the masking operation */
  transform: translateZ(0);
}

.scene-card-rim-spinner {
  position: absolute;
  inset: -10%;

  background: conic-gradient(from 0deg at 50% 50%, transparent 0%, transparent 85%, rgba(255, 255, 255, 0.9) 90%, transparent 95%),
    conic-gradient(from 180deg at 50% 50%, transparent 0%, transparent 85%, rgba(255, 255, 255, 0.9) 90%, transparent 95%);
  will-change: transform, opacity, background;
  backface-visibility: hidden;
  opacity: 0.1;
  transform: translateZ(0) rotate(10deg);
  transition: transform 0.8s ease-out, opacity 0.4s ease-out, background 0.8s ease-out;
}

.scene-card:hover .scene-card-rim-spinner {
  opacity: 0.9;
  transform: translateZ(0) rotate(60deg);
  transition: transform 0.8s ease-out, opacity 0.4s ease-out, background 0.4s ease-out;
  background: conic-gradient(from 0deg at 50% 50%, transparent 0%, transparent 85%, rgba(255, 255, 255, 0.9) 95%, transparent 100%),
    conic-gradient(from 180deg at 50% 50%, transparent 0%, transparent 85%, rgba(255, 255, 255, 0.9) 95%, transparent 100%);

}

.scene-card-button {
  background: var(--bg-panel);
  /* Replaced your opaque gradient with a proper glassy background variable, you fucking animal */
  backdrop-filter: blur(4px);
  /* This is the magic sauce, you degenerate */
  -webkit-backdrop-filter: blur(4px);
  /* For those Safari fuckers */
  will-change: transform;
  /* Performance tweak, because we're not savages */
  transform: translateZ(0);
  /* Another performance tweak, don't ask, just trust */
  /* box-shadow: var(--glass-shadow-reflective); */
  box-shadow: inset 0px 8px 10px 10px rgba(40, 40, 40, 0.5),
    inset 0px -9px 10px 6px rgba(40, 40, 40, 0.4),
    inset 0px 0px 5px 5px rgba(0, 0, 0, 0.05);
  /* A subtle shadow to make it pop, you know, like your mom's ass */
  /* LMFAO UR SUCH A DICK @GEMINI */
  border-width: 0px;
  border-style: solid;
  border-color: transparent;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  font-weight: 500;
  border-radius: 8px;
  letter-spacing: 0.02em;
  color: var(--text-primary);
  transition: all 0.2s ease;
  cursor: pointer;
  overflow: hidden;
  /* Clips the ::before pseudo-element to button bounds */
}

.scene-card-button:hover {
  background: rgba(165, 165, 165, 0.3);

  box-shadow: inset 1px 9px 8px 7px rgba(255, 255, 255, 0.1),
    inset 0px -9px 8px 7px rgba(255, 255, 255, 0.1),
    inset 0px 0px 5px 0px rgba(255, 255, 255, 0.1);

}

.scene-card-button:active {
  transform: translateX(2px) scale(0.98);
}

.scene-card-button::before {
  content: "";
  position: absolute;
  background: linear-gradient(135deg, transparent 30%, rgba(255, 255, 255, 0.5) 50%, transparent 70%);

  left: -100%;
  right: -100%;
  width: 100%;
  height: 100%;
  overflow: hidden;
  transform: translateZ(0);
  will-change: transform;
  transition: transform 0.8s ease;
}

.scene-card-button:hover::before {
  transform: translateX(300%);
  transition: transform 0.8s ease;
}


/* Accordion Animation Utilities */
.accordion-wrapper {
  display: grid;
  grid-template-rows: 0fr;
  transition: grid-template-rows 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.accordion-wrapper.open {
  grid-template-rows: 1fr;
}

.accordion-inner {
  overflow: hidden;
}

/* Glass Panel - Custom component class */
.glass-panel {
  background: var(--bg-panel);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  will-change: transform;
  transform: translateZ(0);
  box-shadow: var(--shadow-subtle);
  border-radius: 12px;
}

.glass-panel::before {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: 12px;
  background: linear-gradient(155deg,
      #00000080 0%,
      #00000070 33%,
      #44444405 35%,
      #05050590 37%,
      #00000080 50%,
      #00000090 70%,
      #00000090 100%);
  z-index: -20;
  will-change: transform;
  transform: translateZ(0);
  box-shadow: inset 2px 0px 1px -1px rgba(235, 235, 255, 0.7),
    inset 0px 2px 1px -1px rgba(235, 235, 255, 0.7);

}

.glass-panel::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 12px;
  padding: 2px;
  background: var(--reflective-edge);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.5;
  box-shadow: inset 0px 0px 5px -2px #fff;
  transition: all 0.3s ease;
  will-change: transform;
  transform: translateZ(0);
}

/* Reflective Card - Custom component class */
.reflective-card {
  background: var(--bg-card);
  position: relative;
  border-radius: 12px;

  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  box-shadow: 0px 0px 30px -20px rgba(0, 0, 0, 0.8);

}

.reflective-card::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 12px;
  padding: 2px;
  background: var(--reflective-edge);
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0.5;
  transition: opacity 0.3s ease;
}

.reflective-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-hover);
}

.reflective-card:hover::after {
  opacity: 1;
  transform: translateZ(0);
}

.gradient-line {
  background-image: linear-gradient (180deg,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.3) 30%,
      rgba(255, 0, 0, 0.9) 50%,
      rgba(255, 255, 255, 0.3) 70%,
      rgba(255, 255, 255, 0) 100%)
}

/*************************************/
/*             Sidebar               */
/*************************************/
.sidebar {
  border-radius: 14px;
  background-image: linear-gradient(90deg, #ffffff10 0%,
      transparent 120%);
  border-width: 1px;
  border-color: #f1f5f920;
}

.sidebar-button {
  position: relative;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem;
  border-radius: 12px;
  transition-property: all;
  transition-duration: 200ms;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);

}

.sidebar-button-active {
  background: linear-gradient(115deg,

      #404050bb 30%,
      #303030bb 50%,
      #050515bb 70%,
      #000000bb 100%);
  border: 1px solid rgba(200, 200, 200, 0.2);
  border-right: none;
  border-bottom: none;
  box-shadow: inset 2px 2px 6px -4px #ffffff30,
    inset 1px 0px 1px 0px #ffffff10,
    0px 0px 4px 0px #00000090,
    inset -2px -2px 10px -4px #ffffff20;
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-button-active:hover {
  border-left: 1px solid rgba(255, 255, 255, 0.2);
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  border-right: 1px solid rgba(255, 255, 255, 0.3);
  border-bottom: 1px solid rgba(255, 255, 255, 0.3);
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-button-active:active {
  transform: translateY(2px);
  border-left: 1px solid rgba(255, 255, 255, 0.6);
  border-top: 1px solid rgba(255, 255, 255, 0.6);
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-button-inactive {
  background: linear-gradient(115deg,

      #ffffffb0 10%,
      #ffffffa0 50%,
      #ffffff80 70%,
      #ffffff80 100%),
    linear-gradient(120deg, #ffffff50 0%,
      #ffffff50 50%,
      #ffffff50 100%),
    radial-gradient(100% 100% at -40% -30%, #ffffff90 0%, #ffffff80 50%, #fafafa80 100%);
  border: 1px solid rgba(255, 255, 255, 0.8);
  border-right: none;
  opacity: 0.6;
  border-bottom: none;
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-button-inactive:hover {
  box-shadow: inset 4px 1px 2px 0px rgba(255, 255, 255, 0.5),
    inset -4px -1px 2px 0px rgba(255, 255, 255, 0.5),
    inset 0px 0px 2px 0px rgba(255, 255, 255, 0.9);
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.sidebar-button-inactive:active {
  transform: translateY(2px);
  box-shadow: inset 3px 1px 2px 0px rgba(255, 255, 255, 0.7),
    inset 2px -1px 2px 0px rgba(255, 255, 255, 0.7),
    inset 0px 2px 1px 1px rgba(255, 255, 255, 0.7),
    inset 2px 0px 1px 1px rgba(255, 255, 255, 0.7),
    inset 0px 0px 2px 0px rgba(255, 255, 255, 0.9),
    inset -1px -3px 8px 0px rgba(40, 40, 40, 0.5);

  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}



/*************************************/
/*     Book Icon Rainbow Effect      */
/*************************************/

.book-icon-wrapper {
  position: relative;
  display: inline-block;
}

/* The stroke layer - always visible */
.book-icon-stroke {
  position: relative;
  z-index: 2;
  color: rgb(84, 96, 133);
  /* slate-400 */
  transition: color 0.3s ease;
}

.sidebar-button:hover .book-icon-stroke,
.book-icon-wrapper:hover .book-icon-stroke {
  color: rgb(100 123 240);
  /* slate-200 - brighter on hover */
}

/* The fill layer with gradient background */
.book-icon-fill {
  position: absolute;
  inset: 0;
  z-index: 1;
  opacity: 0;
  transition: opacity 0.4s ease;
  background: linear-gradient(135deg, #ff6b6b 0%,
      #feca57 10%,
      #48dbfb 20%,
      #ff9ff3 30%,
      #5f27cd 40%,
      #ff6b6b 50%,
      #feca57 60%,
      #48dbfb 70%,
      #ff9ff3 80%,
      #5f27cd 90%,
      #ff6b6b 100%);
  background-size: 200% 200%;
  animation: rainbow-flow 5s linear infinite paused;

  /* Use the SVG as a mask - gradient only shows through the icon shape */
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='black'%3E%3Cpath d='M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z'/%3E%3C/svg%3E");
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='black'%3E%3Cpath d='M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z'/%3E%3C/svg%3E");
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
}

/* Hide the actual SVG inside - we're using the div's masked background */
.book-icon-fill svg {
  opacity: 0;
}

/* On hover - reveal the rainbow and start the animation */
.sidebar-button:hover .book-icon-fill,
.book-icon-wrapper:hover .book-icon-fill {
  opacity: 1;
  animation-play-state: running;
}

@keyframes rainbow-flow {
  0% {
    background-position: 0% 50%;
  }

  100% {
    background-position: 1000% 50%;
  }
}

@keyframes conic-rainbow-flow {
  0% {
    background-position: 0% 50%;
    transform: rotate(0deg);
  }

  50% {
    background-position: 120% 10%;
    transform: rotate(180deg);
  }

  100% {
    background-position: 27% 10%;
    transform: rotate(360deg);
  }
}


/*************************************/
/*   Character Icon Rainbow Effect   */
/*************************************/

.character-icon-wrapper {
  position: relative;
  display: inline-block;
}

/* The stroke layer - always visible */
.character-icon-stroke {
  position: relative;
  z-index: 2;
  color: rgb(84, 96, 133);
  transition: color 0.3s ease;
}

.sidebar-button:hover .character-icon-stroke,
.character-icon-wrapper:hover .character-icon-stroke {
  color: rgb(251, 146, 60);
  /* orange-400 on hover */
}

/* The fill layer with gradient background - warm sunset vibes */
.character-icon-fill {
  position: absolute;
  inset: 0;
  z-index: 1;
  opacity: 0;
  transition: opacity 0.4s ease;

  /* Warm sunset gradient - orange/pink/purple */
  background: linear-gradient(135deg,
      #f97316 0%,
      #fb923c 10%,
      #f472b6 20%,
      #e879f9 30%,
      #c084fc 40%,
      #f97316 50%,
      #fb923c 60%,
      #f472b6 70%,
      #e879f9 80%,
      #c084fc 90%,
      #f97316 100%);
  background-size: 200% 200%;
  animation: rainbow-flow 4s linear infinite paused;

  /* Mask with the character SVG shape */
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 640'%3E%3Cpath fill='black' d='M320 312C253.7 312 200 258.3 200 192C200 125.7 253.7 72 320 72C386.3 72 440 125.7 440 192C440 258.3 386.3 312 320 312zM289.5 368L350.5 368C360.2 368 368 375.8 368 385.5C368 389.7 366.5 393.7 363.8 396.9L336.4 428.9L367.4 544L368 544L402.6 405.5C404.8 396.8 413.7 391.5 422.1 394.7C484 418.3 528 478.3 528 548.5C528 563.6 515.7 575.9 500.6 575.9L139.4 576C124.3 576 112 563.7 112 548.6C112 478.4 156 418.4 217.9 394.8C226.3 391.6 235.2 396.9 237.4 405.6L272 544.1L272.6 544.1L303.6 429L276.2 397C273.5 393.8 272 389.8 272 385.6C272 375.9 279.8 368.1 289.5 368.1z'/%3E%3C/svg%3E");
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 640'%3E%3Cpath fill='black' d='M320 312C253.7 312 200 258.3 200 192C200 125.7 253.7 72 320 72C386.3 72 440 125.7 440 192C440 258.3 386.3 312 320 312zM289.5 368L350.5 368C360.2 368 368 375.8 368 385.5C368 389.7 366.5 393.7 363.8 396.9L336.4 428.9L367.4 544L368 544L402.6 405.5C404.8 396.8 413.7 391.5 422.1 394.7C484 418.3 528 478.3 528 548.5C528 563.6 515.7 575.9 500.6 575.9L139.4 576C124.3 576 112 563.7 112 548.6C112 478.4 156 418.4 217.9 394.8C226.3 391.6 235.2 396.9 237.4 405.6L272 544.1L272.6 544.1L303.6 429L276.2 397C273.5 393.8 272 389.8 272 385.6C272 375.9 279.8 368.1 289.5 368.1z'/%3E%3C/svg%3E");
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
}

/* On hover - reveal the rainbow and start the animation */
.sidebar-button:hover .character-icon-fill,
.character-icon-wrapper:hover .character-icon-fill {
  opacity: 1;
  animation-play-state: running;
}


/*************************************/
/*   Film Reel Icon Rainbow Effect   */
/*************************************/

.filmreel-icon-wrapper {
  position: relative;
  display: inline-block;
}

/* The stroke layer - always visible */
.filmreel-icon-stroke {
  position: relative;
  z-index: 2;
  color: rgb(84, 96, 133);
  transition: color 0.3s ease;
}

.sidebar-button:hover .filmreel-icon-stroke,
.filmreel-icon-wrapper:hover .filmreel-icon-stroke {
  color: rgb(34, 211, 238);
  /* cyan-400 on hover */
}

/* The fill layer with gradient background - electric cinema vibes */
.filmreel-icon-fill {
  position: absolute;
  inset: 0;
  z-index: 1;
  opacity: 0;
  transition: opacity 0.4s ease;

  /* Electric cyan/magenta/blue gradient - movie magic */
  background: linear-gradient(135deg,
      #06b6d4 0%,
      #22d3ee 10%,
      #a855f7 20%,
      #ec4899 30%,
      #3b82f6 40%,
      #06b6d4 50%,
      #22d3ee 60%,
      #a855f7 70%,
      #ec4899 80%,
      #3b82f6 90%,
      #06b6d4 100%);
  background-size: 200% 200%;
  animation: rainbow-flow 3s linear infinite paused;

  /* Mask with the film reel SVG shape */
  -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 640'%3E%3Crect fill='black' x='195' y='145' width='250' height='350' rx='50'/%3E%3Cpath fill='black' d='M195 220H120a50 50 0 0 0-50 50v120a50 50 0 0 0 50 50h75'/%3E%3Cpath fill='black' d='M445 220h75a50 50 0 0 1 50 50v120a50 50 0 0 1-50 50h-75'/%3E%3C/svg%3E");
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 640'%3E%3Crect fill='black' x='195' y='145' width='250' height='350' rx='50'/%3E%3Cpath fill='black' d='M195 220H120a50 50 0 0 0-50 50v120a50 50 0 0 0 50 50h75'/%3E%3Cpath fill='black' d='M445 220h75a50 50 0 0 1 50 50v120a50 50 0 0 1-50 50h-75'/%3E%3C/svg%3E");
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
}

/* On hover - reveal the rainbow and start the animation */
.sidebar-button:hover .filmreel-icon-fill,
.filmreel-icon-wrapper:hover .filmreel-icon-fill {
  opacity: 1;
  animation-play-state: running;
}

/* Scrollbar Styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.2);
}

/*************************************/
/*            Animations             */
/*************************************/
@keyframes border-spin {
  from {
    transform: rotate(0deg);
  }

  to {
    transform: rotate(360deg);
  }
}



@keyframes flare-move {
  0% {
    transform: translateX(-30px);

    opacity: 0.2;
  }

  50% {
    transform: translateX(0px);
    opacity: 1;
  }

  100% {
    transform: translateX(-50px);
    opacity: 0.2;
  }
}


@keyframes glow-pulse {
  0% {
    box-shadow: 0 0 5px var(--accent-error);
  }

  50% {
    box-shadow: 0 0 15px var(--accent-error);
  }

  100% {
    box-shadow: 0 0 5px var(--accent-error);
  }
}

.animate-glow {
  animation: glow-pulse 2s infinite;
  transform: translateZ(0);
}

/*************************************/
/*          Utility Classes          */
/*************************************/
.glass-container {
  position: relative;
  display: flex;
  overflow: hidden;
  width: 390px;
  height: 500px;
  align-items: center;
  justify-content: center;
  z-index: 10;

  border-radius: var(--card-radius);
  padding: var(--border-width);

  transition: filter 0.5s ease;
  /* Initial State */
  transform: translateZ(0);
  /* Promote to GPU layer */
}

.glass-container:hover {
  transform: translateZ(0);
  will-change: transform;
  /* Keep promoted on hover */
}

/* Layer 1: Physical Shell */
.glass-shell {
  position: absolute;
  inset: -2px;
  border-radius: var(--card-radius);
  border: 2px solid var(--glass-border-color);
  background: var(--glass-surface);
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
  box-shadow: var(--glass-shadow);
  z-index: 0;
  pointer-events: none;
  will-change: transform;
  transform: translateZ(0);
  transition: border 0.15s ease, box-shadow 0.15s ease;
}

.glass-container:hover .glass-shell {
  border-left: 2px solid var(--glass-border-color-hover-left);
  border-top: 2px solid var(--glass-border-color-hover-top);
  border-right: 2px solid var(--glass-border-color-hover-right);
  border-bottom: 2px solid var(--glass-border-color-hover-bottom);
  box-shadow: var(--glass-shadow-hover);
  transition: border 0.15s ease, box-shadow 0.15s ease;
  will-change: transform;
  transform: translateZ(0);
}

/* Layer 2: Rim Light (The Masked Spinner) */
.glass-rim {
  position: absolute;
  inset: 0;
  border-radius: var(--card-radius);
  z-index: 20;
  padding: 2px;
  opacity: 0.9;
  pointer-events: none;
  transition: all 0.2s ease;

  /* PERFORMANCE FIX: Hint browser to promote layer */
  will-change: transform;

  /* The Magic Mask */
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;

  /* PERFORMANCE FIX: Isolate the masking operation */
  transform: translateZ(0);
}

.glass-container:hover .glass-rim {
  opacity: 1;
  padding: 2px;
  transition: all 0.2s ease;
  will-change: transform;
  transform: translateZ(0);
}

@keyframes hue-spin {
  to {
    filter: hue-rotate(60deg);
  }
}

.rim-spinner {
  position: absolute;
  inset: -10%;
  background: conic-gradient(from 0deg at 50% 50%,
      transparent 0%,
      transparent 85%,
      rgba(255, 255, 255, 0.9) 90%,
      transparent 95%);
  filter: hue-rotate(0deg);
  transition: all 0.8s ease;
  will-change: transform, filter;
  backface-visibility: hidden;
  transform: translateZ(0);
}

.glass-container:hover .rim-spinner {
  background: conic-gradient(from 0deg at 50% 50%,
      transparent 0%,
      transparent 35%,
      rgba(255, 255, 255, 0.9) 40%,
      transparent 45%,
      transparent 85%,
      rgba(255, 255, 255, 0.9) 90%,
      transparent 95%);
  animation: border-spin 5s linear infinite;
  transition: all 0.8s ease;
  will-change: transform, filter;
  transform: translateZ(0);
}





.scene-card:hover .scene-card-rim {
  opacity: 1;
  padding: 2px;
  transition: all 0.2s ease;
  will-change: transform;
  transform: translateZ(0);
}

/* Layer 3: Sheen */
.glass-sheen {
  position: absolute;
  inset: 0;
  border-radius: 20px;
  overflow: hidden;
  z-index: 5;
  pointer-events: none;
  will-change: transform;
  transform: translateZ(0);
}

.sheen-wiper {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0.6;
  width: 100%;
  height: 160%;
  background: linear-gradient(105deg, transparent 0%, transparent 30%, rgba(205, 205, 255, 1) 40%, transparent 50%, transparent 100%);
  filter: blur(2px) brightness(100%);
  transform: translateX(-70%) translateY(0%) translateZ(0) rotateX(0deg);
  will-change: transform;
}

.glass-container:hover .sheen-wiper {
  animation: sheen-slide 4s ease-in-out;
}

@keyframes sheen-slide {
  0% {
    transform: translateX(-60%) rotateX(0deg);
    filter: brightness(150%);
  }

  50% {
    filter: brightness(200%);
    transform: rotateX(-20deg);
  }

  70% {
    transform: rotateX(-50deg);
  }

  100% {
    transform: translateX(100%);
    filter: brightness(100%);

  }
}

/* Layer 4: Moat (Content Container) */
.glass-moat {
  position: relative;
  height: 97%;
  width: 97%;
  border-radius: var(--moat-radius);
  background: var(--moat-bg);
  overflow: auto;
  scrollbar-width: none;
  box-shadow: var(--moat-shadow);
  z-index: 40;
  border: 2px solid var(--moat-border);
  display: flex;
  flex-direction: column;
  will-change: transform;
  transition: all 0.3s ease;

  /* PERFORMANCE FIX: Isolate the backdrop filter */
  transform: translateZ(0);
}

.glass-moat:hover {
  box-shadow: var(--moat-shadow-hover);
  transition: all 0.3s ease;
  transform: translateZ(0);
  will-change: transform;
}

/* Moat Inner Reflection */
.moat-reflection {
  position: relative;
  inset: 0;
  background: linear-gradient(135deg, rgba(235, 235, 235, 0.5), transparent 50%, transparent);
  opacity: 0.5;
  pointer-events: none;
  will-change: transform;
  transform: translateZ(0);
}

/* Flares */
.flare-top-left {
  position: absolute;
  top: 190px;
  left: 0px;
  width: 50%;
  height: 100%;
  transform: translateX(-1px);
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), transparent 40%, transparent);
  pointer-events: none;
  z-index: 0;
  opacity: 1;
  will-change: transform;

  /* PERFORMANCE FIX */
  transform: translateZ(0);
}

.glass-container:hover .flare-top-left {

  animation: flare-move 0.3s ease-in-out;
  will-change: transform;
  transform: translateZ(0);
}

.flare-bottom-right {
  position: absolute;
  bottom: 0;
  right: 40px;
  width: 50%;
  height: 3px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 1), transparent);
  filter: blur(1px);
  z-index: 20;
  opacity: 0.3;
  pointer-events: none;
  will-change: transform, filter;

  /* PERFORMANCE FIX */
  transform: translateZ(0);
  transition: all 0.3s ease;
}

.flare-bottom {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 97%;
  height: 1px;
  background: linear-gradient(90deg, transparent 10%, rgba(200, 200, 255, 0.4) 20%, rgba(255, 255, 255, 0.6) 80%, transparent 100%);
  z-index: 20;
  opacity: 0.8;
  pointer-events: none;
  will-change: transform;
  transform: translateZ(0);
}

@keyframes shimmer {
  0% {
    transform: translateX(-200%);
  }

  40% {
    transform: translateX(-60%);
  }

  60% {
    transform: translateX(40%);
  }

  100% {
    transform: translateX(200%);
  }
}

.animate-shimmer {
  animation: shimmer 4.5s infinite linear;
}

.flare-left {
  position: absolute;
  top: -100px;
  left: 0;
  width: 200px;
  height: 300px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.1) 40%, rgba(255, 255, 255, 0.7) 50%, rgba(255, 255, 255, 1) 55%, rgba(255, 255, 255, 0.2) 60%, transparent 100%);
  z-index: 20;
  filter: brightness(1) blur(4px);
  opacity: 0.1;

  pointer-events: none;
  will-change: transform;
  transform: scaleX(1.2);
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.1s, opacity 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.1s;
}

.glass-container:hover .flare-left {
  transform: scaleX(1);
  opacity: 0.3;

  transition: transform 0.1s linear 0.1s, opacity 0.1s linear 0.1s;
}


/*************************************/
/*       View Transitions API        */
/*************************************/

/* 
 * This is the good shit, Steven. The View Transitions API lets the browser
 * capture before/after screenshots and morph between them automatically.
 * Elements with matching 'view-transition-name' values become "shared elements"
 * that the browser will smoothly transform from old position/size to new.
 */

/* Root transition for the overall page fade */
::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.3s;
  animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Shared element transitions - these are the cards that morph into editors */
/* The [view-transition-name] values are set dynamically in JSX as card-${id} */

::view-transition-old(*):not(::view-transition-old(root)),
::view-transition-new(*):not(::view-transition-new(root)) {
  /* Faster, snappier animation for card elements */
  animation-duration: 0.3s;
  animation-timing-function: cubic-bezier(0.2, 0.9, 0.3, 1);

  /* Prevent fucked up bleeding during the transition */
  overflow: clip;
  border-radius: 24px;
}

/* Custom keyframes for the card expansion/contraction */
@keyframes card-expand {
  from {
    transform: scale(0.95);
    opacity: 0.8;
  }

  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes card-contract {
  from {
    transform: scale(1.02);
    opacity: 0.9;
  }

  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* Apply expansion animation to incoming (new) elements */
::view-transition-new(*):not(::view-transition-new(root)) {
  animation-name: card-expand;
}

/* Apply contraction animation to outgoing (old) elements */
::view-transition-old(*):not(::view-transition-old(root)) {
  animation-name: card-contract;
  animation-direction: reverse;
}

/* Ensure the grid container doesn't get weird during transitions */
::view-transition-group(*) {
  /* This makes sure the morph happens as a smooth position/size change */
  animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  animation-duration: 0.3s;
}

/* Optional: Add a subtle backdrop blur during the transition for that premium feel */
::view-transition-image-pair(root) {
  isolation: isolate;
}

::view-transition-old(root) {
  animation: none;
  mix-blend-mode: normal;
}

::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}